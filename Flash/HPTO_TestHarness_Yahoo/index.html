<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

		<title>Test Harness Yahoo HPTO</title>

		<style>

			body
			{
				margin:0;
			}

			#swfContainer_Interaction_Overlay
			{
				display: none;
				z-index: 3;
				position: absolute;

				width: 972px;
				height: 900px;
				/*background-color: #366097;*/
			}


			#swfContainer_Autoplay_Overlay
			{
				display: none;
				z-index: 2;
				position: absolute;

				top: 400px;
				left: 28px;
				width: 972px;
				height: 550px;
				/*background-color: #ff7f50;*/
			}


			#swfContainer_300x250_LeaveBehind
			{
				display: none;
				position: relative;

				top: 400px;
				left: 700px;
				width: 300px;
				height: 250px;
			}

		</style>
	</head>
	<body onload="init();">

		<div id="swfContainer_Interaction_Overlay"> </div>

		<div id="swfContainer_Autoplay_Overlay"> </div>

		<div id="swfContainer_300x250_LeaveBehind"> </div>

		<script src="js/swfobject.js"></script>

		<script>

			var FIRST_IMPRESSION_OVERLAY_972x550_SWF = 'swf/first_impression_overlay_972x550.swf';
			var FIRST_IMPRESSION_300x250_SWF = 'swf/first_impression_300x250.swf';

			var USER_INITIATED_OVERLAY_972x900_SWF = 'swf/user_initiated_overlay_972x900.swf';

			var SUBSEQUENT_IMPRESSION_300x250_SWF = 'swf/subsequent_impression_300x250.swf';




			var isFirstImpression = true;

			function init()
			{
				if (isFirstImpression) initializeFirstImpressionView();
				else initializeSubsequentImpressionView();
			}


			function initializeFirstImpressionView ()
			{
				initSwf (FIRST_IMPRESSION_OVERLAY_972x550_SWF, "swfContainer_Autoplay_Overlay", swfEmbedCompleteHandler);
				initSwf (FIRST_IMPRESSION_300x250_SWF, "swfContainer_300x250_LeaveBehind", swfEmbedCompleteHandler);
			}


			function initializeSubsequentImpressionView ()
			{
				// Load and play subsequent views 300x250 swf

			}


			function initSwf(swfName, targetId, onCompleteHandler)
			{
				var flashVars = {
				}

				var attributes = {
					/*id: targetId+"_swf",
					align: "left",
					styleclass: "myclass"*/
				};

				var params = {
					menu: "false",
					wmode: "transparent"
				};

				swfobject.embedSWF(swfName, targetId, '100%', '100%', '10.0.0', 'expressInstall.swf', flashVars, params, attributes, onCompleteHandler);
			}


			var loadedSwfs = [];

			function swfEmbedCompleteHandler (callbackObject)
			{
				loadedSwfs.push (callbackObject.id);

				if (loadedSwfs.indexOf('swfContainer_Autoplay_Overlay') != -1 && loadedSwfs.indexOf('swfContainer_300x250_LeaveBehind') != -1)
				{
					// Both swfs embedded, display container divs

					loadedSwfs.forEach(function (arg) {
						document.getElementById (arg).style.display = 'block';
					});
				}

				console.log ('swf embedded', callbackObject, loadedSwfs);
			}


			/*
			Flash Callback Methods
			 */
			function firstImpressionOverlaySwfReady()
			{
				/*alert ("first impression overlay swf ready");*/
				document.getElementById('swfContainer_Autoplay_Overlay').startAnimation();
			}

			function firstImpressionOverlaySwfCompleted()
			{
				document.getElementById('swfContainer_Autoplay_Overlay').style.display = 'none';
				document.getElementById('swfContainer_300x250_LeaveBehind').startAnimation();
			}

			function firstImpressionLeavebehindSwfReady()
			{
				/*alert ("first impression leave behind swf ready");*/
			}

			function firstImpressionLeavebehindSwfCompleted()
			{
				/*alert ("first impression leave behind swf COMPLETED");*/
			}
		</script>
	</body>
</html>
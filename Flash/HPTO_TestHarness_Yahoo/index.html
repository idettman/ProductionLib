<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

		<title>Test Harness Yahoo HPTO</title>

		<style>

			body
			{
				margin: 0;
			}

			.container
			{
				position: absolute;
				top: 0;
				left: 0;
				width: 100%;
				height: 1413px;
			}

			#swfContainer_Interaction_Overlay
			{
				z-index: 2;
				display: none;
				position: absolute;
				width: 972px;
				height: 900px;
			}

			#swfContainer_Autoplay_Overlay
			{
				z-index: 1;
				display: none;
				position: absolute;

				width: 972px;
				height: 550px;

				margin-top: 158px;
				margin-left: 170px;
			}

			#swfContainer_300x250_LeaveBehind
			{
				display: none;
				position: absolute;

				width: 300px;
				height: 250px;

				margin-top: 158px;
				margin-left: 842px;
			}

		</style>
	</head>
	<body id="bodyBase" style="min-height: 1083px" onload="init();">

		<div id="backgroundContainer" class="container">
			<img src="img/aol_background.jpg" width="1183" height="1413" border="0"
			     style="display: block; width: 1183px; margin-left: auto; margin-right: auto"/>
		</div>

		<div id="adContainer" class="container">

			<div style="width:1183px; margin-left: auto; margin-right: auto;">

				<div id="swfContainer_Interaction_Overlay"></div>
				<div id="swfContainer_Autoplay_Overlay"></div>
				<div id="swfContainer_300x250_LeaveBehind"></div>
			</div>
		</div>


		<script src="js/swfobject.js"></script>

		<script>

			var FIRST_IMPRESSION_300x250_SWF = 'swf/first_impression_300x250.swf';
			var FIRST_IMPRESSION_OVERLAY_972x550_SWF = 'swf/first_impression_overlay_972x550.swf';

			//var USER_INITIATED_OVERLAY_972x900_SWF = 'swf/user_initiated_overlay_972x900.swf';

			var SUBSEQUENT_IMPRESSION_300x250_SWF = 'swf/subsequent_impression_300x250.swf';


			var isFirstImpression = true;


			function init ()
			{
				if (isFirstImpression) initializeFirstImpressionView ();
				else initializeSubsequentImpressionView ();
			}


			function initializeFirstImpressionView ()
			{
				initSwf (FIRST_IMPRESSION_OVERLAY_972x550_SWF, "swfContainer_Autoplay_Overlay", swfEmbedCompleteHandler, "transparent");
				initSwf (FIRST_IMPRESSION_300x250_SWF, "swfContainer_300x250_LeaveBehind", swfEmbedCompleteHandler, "opaque");
			}


			function initializeSubsequentImpressionView ()
			{
				// Load and play subsequent views 300x250 swf

			}


			function initSwf (swfName, targetId, onCompleteHandler, wmode)
			{
				var flashVars = {

				};

				var attributes = {

				};

				if (!wmode)
				{
					wmode = "transparent";
				}

				var params = {
					menu: "false",
					wmode: wmode
				};

				swfobject.embedSWF (swfName, targetId, '100%', '100%', '10.0.0', 'expressInstall.swf', flashVars, params, attributes, onCompleteHandler);
			}


			var loadedSwfs = [];

			function swfEmbedCompleteHandler (callbackObject)
			{
				loadedSwfs.push (callbackObject.id);

				if (loadedSwfs.indexOf ('swfContainer_Autoplay_Overlay') != -1 && loadedSwfs.indexOf ('swfContainer_300x250_LeaveBehind') != -1)
				{
					// Both swfs embedded, display container divs
					loadedSwfs.forEach (function (arg)
					{
						document.getElementById (arg).style.display = 'block';
					});
				}
				console.log ('swf embedded', callbackObject, loadedSwfs);
			}


			/*
			 Flash Callback Methods
			 */
			function firstImpressionOverlaySwfReady ()
			{
				console.log ('firstImpressionOverlaySwfReady');
				document.getElementById ('swfContainer_Autoplay_Overlay').startAnimation ();
			}

			function firstImpressionOverlaySwfCompleted ()
			{
				console.log ('firstImpressionOverlaySwfCompleted');
				document.getElementById ('swfContainer_Autoplay_Overlay').style.display = 'none';
				document.getElementById ('swfContainer_300x250_LeaveBehind').startAnimation ();
			}

			function firstImpressionLeavebehindSwfReady ()
			{
				console.log ('firstImpressionLeavebehindSwfReady');
				/*alert ("first impression leave behind swf ready");*/
			}

			function firstImpressionLeavebehindSwfCompleted ()
			{
				console.log ('firstImpressionLeavebehindSwfCompleted');
				/*alert ("first impression leave behind swf COMPLETED");*/
			}
		</script>
	</body>
</html>